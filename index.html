<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Horarios ADIF</title>
</head>
<body>
    <h1>Consulta de horarios de trenes</h1>
    <input id="codigo" placeholder="Introduce el código de estación">
    <button onclick="buscar()">Buscar</button>
    <ul id="resultado"></ul>

    <script>
        async function buscar() {
            const codigo = document.getElementById("codigo").value;
            const res = await fetch(`https://adif.onrender.com/api/horarios?codigo=${codigo}`);

            const data = await res.json();
            const ul = document.getElementById("resultado");
            ul.innerHTML = "";
            if (data.horarios) {
                data.horarios.forEach(h => {
                    const li = document.createElement("li");
                    li.textContent = `${h.hora} - ${h.estacion} - Tren ${h.tren}`;
                    ul.appendChild(li);
                });
            } else {
                ul.innerHTML = `<li>No hay horarios disponibles o error: ${data.error || "desconocido"}</li>`;
            }
        }
    </script>
</body>
</html>

